<!-- Header -->
      <div class="header">
        <div class="salutation">
          <h2>Hi {{ userData.name.split(' ')[0] }}...</h2>
        </div>
        <div class="header-actions" style="margin-left: 50%; margin-right: 10px; cursor: pointer;">
          <div class="user-profile" (click)="openProfileModal()">
            <div class="profile-img">{{ userData.initials }}</div>
            <div class="user-info">
              <div class="user-name">{{ userData.name }}</div>
              <div class="user-role">{{ userData.role }}</div>
            </div>
          </div>
        </div>
        <button class="logout-icon" aria-label="Logout" routerLink="/">
      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <path d="M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4"/>
        <polyline points="16 17 21 12 16 7"/>
        <line x1="21" x2="9" y1="12" y2="12"/>
      </svg>
    </button>
      </div>

      <!-- Main Content -->
      <div class="main-content">
        <div class="page-title">
          <div class="title">Dashboard</div>
        </div>

        <!-- Stats Cards -->
        <div class="stats-cards">
            <div class="stat-card" *ngFor="let stat of stats">
                <div class="card-header">
                    <div>
                        <div class="card-value">{{ stat.value }}</div>
                        <div class="card-label">{{ stat.label }}</div>
                    </div>
                    <div class="card-icon {{ stat.color }}">
                        <i class="{{ stat.icon }}"></i>
                    </div>
                </div>
                <div class="card-change {{ stat.trend }}">
                    <i class="fas" [ngClass]="{
                      'fa-arrow-down': stat.trend === 'negative',
                      'fa-arrow-up': stat.trend === 'positive'
                    }"></i>
                    <span>{{ stat.change }}</span>
                </div>
            </div>
        </div>


        <!-- Recent Exams -->
        <div class="table-card">
            <div class="card-title">
                <h3><i class="fa-solid fa-clipboard-list"></i> Student and Admin Records </h3>
                <button class="btn btn-outline btn-sm" (click)="onViewAll()">
                    <i class="fas" [ngClass]="{
                      'fa-eye': !isTableVisible,
                      'fa-eye-slash': isTableVisible
                    }"></i> {{ isTableVisible ? 'Hide' : 'Show' }} Table
                </button>
            </div>
            <div *ngIf="isTableVisible">
                <div class="search-container">
                    <input type="text"
                    [(ngModel)]="searchText"
                    (input)="onSearch($event)"
                    placeholder="Search by Name or Status..."
                    class="search-input" />
                    <i class="fas fa-search search-icon"></i>
                </div>
                <table class="data-table">
                    <thead>
                        <tr>
                            <th>First Name</th>
                            <th>Last Name</th>
                            <th>Email</th>
                            <th>Role</th>
                            <th>Actions</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let record of records | searchFilterPipe:searchText">
                            <td>{{ record.firstName }}</td>
                            <td>{{ record.lastName }}</td>
                            <td>{{ record.email }}</td>
                            <td>
                              <ng-container *ngIf="editingEmail !== record.email">
                                {{ record.role }}
                              </ng-container>
                              <ng-container *ngIf="editingEmail === record.email">
                                <select [(ngModel)]="editRoleValue">
                                  <option>Student</option>
                                  <option>Admin</option>
                                </select>
                              </ng-container>
                            </td>
                            <td>
                              <ng-container *ngIf="editingEmail !== record.email">
                                <!-- prevent editing own role from here -->
                                <button *ngIf="record.email !== userData.email" class="btn btn-sm" (click)="startEdit(record)">Edit Role</button>
                                <button class="btn btn-sm btn-danger" (click)="deleteRecord(record)">Delete</button>
                              </ng-container>
                              <ng-container *ngIf="editingEmail === record.email">
                                <button class="btn btn-sm" (click)="saveRole(record)">Save</button>
                                <button class="btn btn-sm" (click)="cancelEdit()">Cancel</button>
                              </ng-container>
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>
        <app-exam-details-modal
            [isOpen]="isModalOpen"
            [examDetails]="selectedExamDetails"
            (closeModal)="closeExamDetails()">
        </app-exam-details-modal>
        <!-- Profile Modal -->
        <div class="modal fade" tabindex="-1" [class.show]="isProfileModalOpen" [style.display]="isProfileModalOpen ? 'block' : 'none'">
          <div class="modal-dialog modal-dialog-centered modal-md">
            <div class="modal-content">
              <form (ngSubmit)="saveProfile()" #profileForm="ngForm">
                <div class="modal-header d-flex flex-column align-items-start">
                  <div class="w-100 d-flex justify-content-between align-items-start">
                    <h4 class="modal-title">Edit Profile</h4>
                    <button type="button" class="btn-close" (click)="closeProfileModal()" aria-label="Close"></button>
                  </div>
                  <p class="modal-subtitle mt-2">Update your profile details</p>
                </div>
                <div class="modal-body">
                  <div class="mb-3">
                    <label>First Name</label>
                    <input type="text" class="form-control" [(ngModel)]="profileEdit.firstName" name="firstName" required>
                  </div>
                  <div class="mb-3">
                    <label>Last Name</label>
                    <input type="text" class="form-control" [(ngModel)]="profileEdit.lastName" name="lastName" required>
                  </div>
                  <div class="mb-3">
                    <label>Email</label>
                    <input type="email" class="form-control" [(ngModel)]="profileEdit.email" name="email" required>
                  </div>
                  <div class="mb-3">
                    <label>Role</label>
                    <!-- Role is not editable from admin profile modal -->
                    <input type="text" class="form-control" [value]="profileEdit.role" disabled>
                  </div>
                </div>
                <div class="modal-footer">
                  <button type="button" class="btn cancel-btn" (click)="closeProfileModal()">Cancel</button>
                  <button type="submit" class="btn add-topic-btn">Save</button>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>