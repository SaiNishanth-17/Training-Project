<div class="dashboard">
  <h2>Admin Analytics</h2>

  <!-- Summary Cards -->
  <div class="summary">
    <div class="card">Total Students <span>{{ totalStudents }}</span></div>
    <div class="card">Total Subjects <span>{{ totalExams }}</span></div>
    <div class="card">Pass Rate <span>{{ passRate }}%</span></div>
  </div>

  <!-- Student Performance -->
  <h3>Student-wise Performance</h3>
  <table>
    <tr>
      <th>Name</th>
      <th>Avg Score</th>
      <th>Pass Rate</th>
    </tr>
    <tr *ngFor="let s of students">
      <td class="clickable" (click)="selectStudent(s)">{{ s.name }}</td>
      <td>{{ s.avgScore }}%</td>
      <td>
        <div class="progress-container">
          <div class="progress-bar" [style.width.%]="s.passRate"></div>
        </div>
        {{ s.passRate }}%
      </td>
    </tr>
  </table>

  <!-- Subject-wise Performance -->
  <h3>Subject-wise Performance</h3>
  <table>
    <tr>
      <th>Subject</th>
      <th>Avg Score</th>
      <th>Submissions</th>
    </tr>
    <tr *ngFor="let sub of subjects">
      <td>{{ sub.examName || sub.subjectName || sub.name || 'Unknown Subject' }}</td>
      <td>{{ sub.avgScore }}%</td>
      <td>{{sub.attempts}}</td>
    </tr>
  </table>

  <!-- Student Modal -->
  <div class="modal" *ngIf="selectedStudent">
    <div class="modal-content">
      <span class="close" (click)="closeModal()">&times;</span>
      <h3>{{ selectedStudent.name }}</h3>
      <p><strong>Average Score:</strong> {{ selectedStudent.avgScore }}%</p>
      <p><strong>Pass Rate:</strong> {{ selectedStudent.passRate }}%</p>
    </div>
  </div>
</div>
